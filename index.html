<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schulplaner 2025/2026</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <h1>üìö Schulplaner 2025/2026</h1>
                    <div class="header-stats">
                        <div class="stat-badge">
                            <span class="badge-icon">üìä</span>
                            <span class="badge-text" id="headerAvg">-</span>
                        </div>
                        <div class="stat-badge">
                            <span class="badge-icon">‚úÖ</span>
                            <span class="badge-text" id="headerTasks">0</span>
                        </div>
                    </div>
                </div>
                <div class="header-right">
                    <div class="search-container">
                        <input type="text" id="searchInput" class="search-input" placeholder="üîç Suchen...">
                        <div id="searchResults" class="search-results"></div>
                    </div>
                    <button id="exportBtn" class="btn-header" title="Daten exportieren">üíæ</button>
                    <button id="darkModeBtn" class="btn-dark-mode">üåô</button>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="tabs">
            <button class="tab-btn active" data-tab="dashboard">üìå Dashboard</button>
            <button class="tab-btn" data-tab="kalender">üìÜ Kalender</button>
            <button class="tab-btn" data-tab="noten">üìä Noten</button>
            <button class="tab-btn" data-tab="pruefungen">üéì Pr√ºfungen</button>
            <button class="tab-btn" data-tab="notizen">üìù Notizen</button>
            <button class="tab-btn" data-tab="lernzeit">‚è±Ô∏è Lern Zeit</button>
            <button class="tab-btn" data-tab="statistiken">üìà Statistiken & Rechner</button>
        </nav>

        <!-- Main Content -->
        <main class="container">
            <!-- DASHBOARD TAB -->
            <section id="dashboard" class="tab-content active">
                <h2>üìå Mein Dashboard</h2>
                
                <!-- LEVEL & XP SYSTEM -->
                <div class="level-card card">
                    <div class="level-header">
                        <div class="level-info">
                            <div class="level-badge">
                                <span class="level-icon">‚≠ê</span>
                                <span class="level-number" id="userLevel">1</span>
                            </div>
                            <div class="level-details">
                                <h3 class="level-title" id="levelTitle">Schulanf√§nger</h3>
                                <p class="level-subtitle">Level <span id="currentLevel">1</span> ‚Ä¢ <span id="currentXP">0</span> / <span id="nextLevelXP">100</span> XP</p>
                            </div>
                        </div>
                        <div class="xp-display">
                            <span class="xp-icon">‚ú®</span>
                            <span class="xp-total" id="totalXP">0 XP</span>
                        </div>
                    </div>
                    <div class="level-progress-container">
                        <div class="level-progress-bar">
                            <div class="level-progress-fill" id="levelProgress" style="width: 0%"></div>
                        </div>
                        <div class="level-progress-labels">
                            <span>Level <span id="prevLevel">1</span></span>
                            <span>Level <span id="nextLevel">2</span></span>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-grid">
                    <!-- Zusammenfassung -->
                    <div class="card dashboard-card">
                        <h3>üìä Meine Statistiken</h3>
                        <div class="dashboard-stats">
                            <div class="dashboard-stat">
                                <div class="stat-circle">
                                    <span id="dashAvg" class="stat-circle-value">-</span>
                                </div>
                                <p class="stat-circle-label">Durchschnitt</p>
                            </div>
                            <div class="dashboard-stat">
                                <div class="stat-circle success">
                                    <span id="dashNotes" class="stat-circle-value">0</span>
                                </div>
                                <p class="stat-circle-label">Noten</p>
                            </div>
                            <div class="dashboard-stat">
                                <div class="stat-circle warning">
                                    <span id="dashTerms" class="stat-circle-value">0</span>
                                </div>
                                <p class="stat-circle-label">Termine</p>
                            </div>
                            <div class="dashboard-stat">
                                <div class="stat-circle danger">
                                    <span id="dashAbsent" class="stat-circle-value">0h</span>
                                </div>
                                <p class="stat-circle-label">Fehlzeiten</p>
                            </div>
                        </div>
                    </div>

                    <!-- N√§chste Ereignisse -->
                    <div class="card dashboard-card">
                        <h3>‚è∞ N√§chste Ereignisse</h3>
                        <div id="dashboard-upcoming" class="dashboard-list"></div>
                    </div>

                    <!-- Ziele -->
                    <div class="card dashboard-card">
                        <h3>üéØ Meine Ziele</h3>
                        <div class="goal-container">
                            <div class="goal">
                                <p>Durchschnittsnote erreichen</p>
                                <input type="number" id="goalGrade" placeholder="z.B. 2.0" min="1" max="6" step="0.1">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="goalProgress"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Noten-Ziele pro Fach -->
                    <div class="card dashboard-card">
                        <h3>üìö Fach-Ziele</h3>
                        <div class="subject-goals-container">
                            <div class="goal-input-row">
                                <input type="text" id="subjectGoalFach" placeholder="Fach (z.B. Deutsch)" class="input" onkeypress="if(event.key==='Enter') addSubjectGoal()">
                                <input type="number" id="subjectGoalGrade" placeholder="Ziel (1.0-6.0)" min="1" max="6" step="0.1" class="input">
                                <button id="addSubjectGoalBtn" class="btn btn-small btn-primary" onclick="addSubjectGoal()">‚ûï Hinzuf√ºgen</button>
                            </div>
                            <div id="subject-goals-list" class="subject-goals-list"></div>
                        </div>
                    </div>

                    <!-- Lernstr√§hne -->
                    <div class="card dashboard-card">
                        <h3>üî• Lernstr√§hne</h3>
                        <div id="streak-counter" class="streak-display">
                            <p class="streak-number">0 üî•</p>
                            <p class="streak-text">Tage in Folge</p>
                        </div>
                        <button id="streakBtn" class="btn btn-success" onclick="updateStreak()">‚úÖ Heute gelernt!</button>
                    </div>
                </div>
                
                <!-- ACHIEVEMENTS SECTION -->
                <div class="achievements-card card">
                    <h3>üèÜ Meine Erfolge</h3>
                    <div class="achievements-grid" id="achievementsGrid">
                        <!-- Achievements werden per JS eingef√ºgt -->
                    </div>
                </div>
            </section>
            
            <section id="kalender" class="tab-content">
                <h2>üìÜ Schulkalender Premium Edition</h2>
                
                <!-- PREMIUM CALENDAR CARD -->
                <div class="card calendar-premium-card">
                    <div class="calendar-header-premium">
                        <button id="prevMonth" class="btn-nav btn-nav-prev">
                            <span class="nav-icon">‚óÄ</span>
                            <span class="nav-text">Zur√ºck</span>
                        </button>
                        <div class="month-year-container">
                            <h3 id="monthYear" class="month-year-display"></h3>
                            <p class="year-subtitle" id="yearDisplay"></p>
                        </div>
                        <button id="nextMonth" class="btn-nav btn-nav-next">
                            <span class="nav-text">Weiter</span>
                            <span class="nav-icon">‚ñ∂</span>
                        </button>
                    </div>

                    <!-- WEEKDAY HEADER -->
                    <div class="calendar-weekdays-premium">
                        <div class="weekday-header">Mo</div>
                        <div class="weekday-header">Di</div>
                        <div class="weekday-header">Mi</div>
                        <div class="weekday-header">Do</div>
                        <div class="weekday-header">Fr</div>
                        <div class="weekday-header">Sa</div>
                        <div class="weekday-header">So</div>
                    </div>

                    <!-- CALENDAR GRID -->
                    <div class="calendar-grid-premium" id="calendar-body">
                    </div>

                    <!-- HOLIDAY INFO -->
                    <div class="calendar-legend-premium">
                        <div class="legend-item">
                            <div class="legend-color holiday"></div>
                            <span>Feiertag</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color vacation"></div>
                            <span>Ferien</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color event"></div>
                            <span>Termin</span>
                        </div>
                    </div>
                </div>

                <!-- EVENT INPUT SECTION -->
                <div class="card calendar-event-card">
                    <h3>‚ûï Neuen Termin hinzuf√ºgen</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">üìÖ Datum</label>
                            <input type="text" id="selectedDateDisplay" placeholder="Klicke auf einen Tag" class="input" readonly>
                        </div>
                        <div class="form-group">
                            <label class="form-label">üìù Titel</label>
                            <input type="text" id="terminInput" placeholder="z.B. Mathetest" class="input">
                        </div>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">‚è∞ Zeit</label>
                            <input type="time" id="terminTimeInput" class="input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">üè∑Ô∏è Typ</label>
                            <select id="terminTypInput" class="input">
                                <option value="pr√ºfung">üìã Pr√ºfung</option>
                                <option value="hausaufgabe">üìù Hausaufgabe</option>
                                <option value="projekt">üéØ Projekt</option>
                                <option value="sonstiges">üìå Sonstiges</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">‚ö° Priorit√§t</label>
                        <select id="terminPriorityInput" class="priority-select">
                            <option value="low">üü¢ Niedrig</option>
                            <option value="medium" selected>üü° Mittel</option>
                            <option value="high">üî¥ Hoch</option>
                        </select>
                    </div>
                    <button id="addTerminBtn" class="btn btn-primary btn-large">‚úÖ Termin speichern</button>
                </div>

                <!-- UPCOMING EVENTS SECTION -->
                <div class="card calendar-events-card">
                    <h3>‚è∞ N√§chste Ereignisse</h3>
                    <div id="calendar-events" class="events-list-premium"></div>
                </div>

                <!-- ALL EVENTS SECTION -->
                <div class="card calendar-all-events-card">
                    <h3>üìã Alle Termine</h3>
                    <div id="termine-list" class="events-table-premium"></div>
                </div>
            </section>

            <!-- NOTEN TAB -->
            <section id="noten" class="tab-content">
                <h2>üìä Notenverwaltung</h2>
                <div class="card noten-card">
                    <h3>Note hinzuf√ºgen</h3>
                    <div class="form-group">
                        <input type="text" id="fachInput" placeholder="Fach (z.B. Mathematik)" class="input">
                    </div>
                    <div class="form-group">
                        <input type="number" id="noteInput" placeholder="Note (1.0 - 6.0)" min="1" max="6" step="0.1" class="input">
                    </div>
                    <div class="form-group">
                        <input type="date" id="datumInput" class="input">
                    </div>
                    <button id="addNoteBtn" class="btn btn-primary">‚úÖ Note speichern</button>
                </div>

                <div class="card">
                    <h3>Meine Noten</h3>
                    <div id="noten-list" class="notes-list"></div>
                </div>
            </section>

            <!-- TERMINE TAB - HIDDEN -->
            <section id="termine" class="tab-content" style="display: none;">
                <!-- This section is now integrated into the calendar tab -->
            </section>

            <!-- PR√úFUNGS-COUNTDOWN TAB -->
            <section id="pruefungen" class="tab-content">
                <h2>üéì Pr√ºfungs-Countdown</h2>
                
                <!-- Neue Pr√ºfung hinzuf√ºgen -->
                <div class="card pruefung-form-card">
                    <h3>‚ûï Neue Pr√ºfung eintragen</h3>
                    <div class="form-group">
                        <input type="text" id="pruefungSubject" placeholder="Fach (z.B. Mathematik)" class="input">
                    </div>
                    <div class="form-group">
                        <input type="text" id="pruefungName" placeholder="Pr√ºfungsname (z.B. Quali)" class="input">
                    </div>
                    <div class="form-group">
                        <input type="date" id="pruefungDate" class="input">
                    </div>
                    <div class="form-group">
                        <select id="pruefungImportance" class="input">
                            <option value="low">‚ÑπÔ∏è Weniger wichtig</option>
                            <option value="medium" selected>‚≠ê Wichtig</option>
                            <option value="high">üî¥ Sehr wichtig</option>
                        </select>
                    </div>
                    <button id="addPruefungBtn" class="btn btn-primary btn-large">‚úÖ Pr√ºfung speichern</button>
                </div>

                <!-- Aktive Pr√ºfungen mit Countdown -->
                <div id="pruefungen-list" class="pruefungen-grid"></div>
            </section>

            <!-- NOTIZEN TAB -->
            <section id="notizen" class="tab-content">
                <h2>üìù Notizen & Notizen</h2>
                <div class="card notizen-card">
                    <h3>Neue Notiz</h3>
                    <div class="form-group">
                        <input type="text" id="notizTitelInput" placeholder="Titel" class="input">
                    </div>
                    <div class="form-group">
                        <textarea id="notizTextInput" placeholder="Notiz-Text..." class="textarea" rows="4"></textarea>
                    </div>
                    <button id="addNotizBtn" class="btn btn-primary">‚úÖ Notiz speichern</button>
                </div>

                <div class="card">
                    <h3>Meine Notizen</h3>
                    <div id="notizen-list" class="notes-list"></div>
                </div>
            </section>

            <!-- STATISTIKEN TAB -->
            <section id="statistiken" class="tab-content">
                <h2>üìà Statistiken & Erfolge</h2>
                
                <!-- Grid Layout f√ºr Statistik & Rechner nebeneinander -->
                <div class="stats-rechner-grid">
                    <!-- STATISTIK SEKTION -->
                    <div class="stats-section">
                        <div class="card stats-card">
                            <h3>Notendurchschnitt pro Fach</h3>
                            <canvas id="notesChart" width="400" height="200"></canvas>
                        </div>
                        
                        <div class="card">
                            <h3>Zusammenfassung</h3>
                            <div id="stats-summary" class="stats-grid">
                                <div class="stat-box">
                                    <p class="stat-label">Durchschnittsnote</p>
                                    <p class="stat-value" id="avgGrade">-</p>
                                </div>
                                <div class="stat-box">
                                    <p class="stat-label">Beste Note</p>
                                    <p class="stat-value" id="bestGrade">-</p>
                                </div>
                                <div class="stat-box">
                                    <p class="stat-label">Schlechteste Note</p>
                                    <p class="stat-value" id="worstGrade">-</p>
                                </div>
                                <div class="stat-box">
                                    <p class="stat-label">Noten gesamt</p>
                                    <p class="stat-value" id="totalGrades">0</p>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <h3>üèÜ Deine Erfolge</h3>
                            <button id="learningDayBtn" class="btn btn-success">üöÄ Lerntag aktivieren!</button>
                            <p id="learning-day-status" class="status-message"></p>
                            <div id="achievements-list" class="achievements-grid"></div>
                        </div>
                    </div>

                    <!-- RECHNER SEKTION -->
                    <div class="rechner-section">
                        <h3 style="text-align: center; margin-bottom: 1.5rem; background: linear-gradient(135deg, var(--accent-color), var(--blue-color)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-family: 'Poppins', sans-serif; font-weight: 900;">üßÆ Taschenrechner</h3>
                        <div class="card rechner-card calculator-card" style="padding: 0; display: flex; justify-content: center; background: linear-gradient(135deg, rgba(109, 40, 217, 0.08) 0%, rgba(59, 130, 246, 0.08) 50%, rgba(6, 182, 212, 0.08) 100%);">
                            <div class="calculator">
                                <div class="calc-display">
                                    <input type="text" id="calcDisplay" readonly placeholder="0">
                                </div>
                                <div class="calc-buttons">
                                    <!-- Reihe 1: Wissenschaftliche Funktionen -->
                                    <button class="calc-btn calc-sci" onclick="addPi()">œÄ</button>
                                    <button class="calc-btn calc-sci" onclick="calculateSquareRoot()">‚àö</button>
                                    <button class="calc-btn calc-sci" onclick="calculateSquare()">x¬≤</button>
                                    <button class="calc-btn calc-sci" onclick="toggleSign()">¬±</button>
                                    
                                    <!-- Reihe 2: Zahlen & Operationen -->
                                    <button class="calc-btn" onclick="addToDisplay('7')">7</button>
                                    <button class="calc-btn" onclick="addToDisplay('8')">8</button>
                                    <button class="calc-btn" onclick="addToDisplay('9')">9</button>
                                    <button class="calc-btn calc-op" onclick="addToDisplay('/')">/</button>
                                    
                                    <!-- Reihe 3 -->
                                    <button class="calc-btn" onclick="addToDisplay('4')">4</button>
                                    <button class="calc-btn" onclick="addToDisplay('5')">5</button>
                                    <button class="calc-btn" onclick="addToDisplay('6')">6</button>
                                    <button class="calc-btn calc-op" onclick="addToDisplay('*')">√ó</button>
                                    
                                    <!-- Reihe 4 -->
                                    <button class="calc-btn" onclick="addToDisplay('1')">1</button>
                                    <button class="calc-btn" onclick="addToDisplay('2')">2</button>
                                    <button class="calc-btn" onclick="addToDisplay('3')">3</button>
                                    <button class="calc-btn calc-op" onclick="addToDisplay('-')">‚àí</button>
                                    
                                    <!-- Reihe 5 -->
                                    <button class="calc-btn" onclick="addToDisplay('0')">0</button>
                                    <button class="calc-btn" onclick="addToDisplay('.')">.</button>
                                    <button class="calc-btn calc-op" onclick="calculatePercent()">%</button>
                                    <button class="calc-btn calc-op" onclick="addToDisplay('+')">+</button>
                                    
                                    <!-- Reihe 6: Trigonometrie & Power -->
                                    <button class="calc-btn calc-sci" onclick="calculateSin()">sin</button>
                                    <button class="calc-btn calc-sci" onclick="calculateCos()">cos</button>
                                    <button class="calc-btn calc-sci" onclick="calculateTan()">tan</button>
                                    <button class="calc-btn calc-sci" onclick="calculatePower()">x^y</button>
                                    
                                    <!-- Reihe 7: Result & Clear -->
                                    <button class="calc-btn calc-equals" onclick="calculateResult()" style="grid-column: 1 / 3;">RESULT</button>
                                    <button class="calc-btn calc-clear" onclick="clearDisplay()" style="grid-column: 3 / 5;">DELETE</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ENGLISCH TAB ENTFERNT - FOKUS AUF PLANER -->
            <!-- MATHE TAB ENTFERNT - FOKUS AUF PLANER -->
            <!-- DEUTSCH TAB ENTFERNT - FOKUS AUF PLANER -->

            <!-- Hausaufgaben Hidden -->
            <section id="hausaufgaben" class="tab-content" style="display: none;">
            </section>

            <!-- LERN ZEIT TAB -->
            <section id="lernzeit" class="tab-content">
                <h2>‚è±Ô∏è Lern Zeit</h2>
                <div class="card lernzeit-card pomodoro-card">
                    <div class="lernzeit-settings">
                        <div class="setting-group">
                            <label for="focusTimeInput">Fokus-Zeit (Minuten):</label>
                            <div class="time-adjuster">
                                <button class="time-btn time-btn-small" onclick="adjustFocusTime(-1)">‚ûñ 1</button>
                                <button class="time-btn" onclick="adjustFocusTime(-5)">‚ûñ 5</button>
                                <input type="number" id="focusTimeInput" min="0" max="120" value="25" class="input-field">
                                <button class="time-btn" onclick="adjustFocusTime(5)">‚ûï 5</button>
                                <button class="time-btn time-btn-small" onclick="adjustFocusTime(1)">‚ûï 1</button>
                            </div>
                        </div>
                        <button id="updateTimerBtn" class="btn btn-primary">‚öôÔ∏è Speichern</button>
                    </div>
                    <div class="pomodoro-timer">
                        <div class="timer-display">
                            <span id="timerMinutes">25</span>:<span id="timerSeconds">00</span>
                        </div>
                        <p id="timerLabel" class="timer-label">üìö Fokus-Session</p>
                    </div>
                    <div class="pomodoro-controls">
                        <button id="startBtn" class="btn btn-primary">‚ñ∂Ô∏è Start</button>
                        <button id="pauseBtn" class="btn btn-secondary" style="display:none;">‚è∏Ô∏è Pause</button>
                        <button id="resetBtn" class="btn btn-danger">üîÑ Reset</button>
                    </div>
                    <div class="pomodoro-stats">
                        <p>Fokus-Sessions: <strong id="pomodoroCount">0</strong></p>
                    </div>
                </div>
            </section>

            <!-- ACHIEVEMENTS TAB ENTFERNT - IN STATISTIKEN INTEGRIERT -->
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>üìö Schulplaner 2025/2026 | Dein digitaler Schulassistent</p>
            <button id="clearDataBtn" class="btn btn-danger btn-small">üóëÔ∏è Alle Daten l√∂schen</button>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
